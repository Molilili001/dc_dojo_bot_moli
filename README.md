# 🏛️ Discord Dojo Bot (道馆挑战机器人)

[![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Discord](https://img.shields.io/badge/Discord-Py-7289DA.svg)](https://discordpy.readthedocs.io/)

> **DC Dojo Bot** 是一个专为 Discord 社区打造的综合型机器人，集成了**RPG 式道馆挑战系统**、**自动化社区管理**、**论坛增强监控**以及多种**实用辅助工具**。

---

## 📚 目录

1. [核心玩法：道馆挑战系统](#1-核心玩法道馆挑战系统)
2. [社区管理与安全](#2-社区管理与安全)
3. [论坛与反馈系统](#3-论坛与反馈系统)
4. [实用工具](#4-实用工具)
5. [开发者与维护](#5-开发者与维护)
6. [安装与配置](#6-安装与配置)

---

## 1. 核心玩法：道馆挑战系统

模拟宝可梦道馆挑战机制，让社区成员通过答题挑战收集徽章，提升活跃度。

### 🛡️ 对于挑战者 (Challengers)
*   **开始挑战**：寻找管理员设置的**挑战面板**，点击按钮即可开启私密挑战。
*   **挑战模式**：
    *   **普通道馆**：允许一定容错，通关获得对应徽章。
    *   **究极道馆 (Ultimate)**：全服高难度挑战，零容错、全随机题库，竞速上榜。
*   **进度追踪**：
    *   `/我的进度`：查看已通过道馆、失败记录及最佳成绩。
    *   `/我的徽章墙`：生成精美图片展示已收集的徽章。
    *   `/排行榜`：查看究极道馆通关时间排名。
*   **毕业奖励**：集齐所有徽章后，通过**毕业面板**领取专属身份组。

### 🏛️ 对于馆主/管理员 (Gym Masters)
*   **道馆管理**：
    *   `/道馆 建造`：上传 JSON 配置创建新道馆。
    *   `/道馆 更新`：修改现有道馆配置。
    *   `/道馆 列表`：查看所有道馆状态。
    *   `/道馆 停业`：临时关闭/开启道馆。
    *   `/道馆 后门`：导出道馆配置 JSON。
*   **面板部署**：
    *   `/召唤面板`：放置道馆挑战入口。
    *   `/更新面板`：修改面板关联的身份组或黑名单设置。
    *   `/召唤徽章墙` / `/召唤排行榜` / `/毕业面板`：放置功能性交互按钮。

---

## 2. 社区管理与安全

完善的风控体系，维护公平的挑战环境。

*   **黑名单系统**：
    *   `/道馆黑名单`：禁止特定用户或身份组参与挑战。
    *   支持跨 Bot 同步，一处拉黑，全服生效。
*   **封禁与处罚**：
    *   `/道馆封禁`：手动封禁用户的挑战权限。
    *   **自动冷却**：连续挑战失败会自动触发临时封禁（禁赛）。
    *   `/admin_解除处罚`：手动解除用户的冷却状态。
    *   `/admin_重置进度`：重置用户特定道馆的挑战记录。
*   **跨 Bot 联动**：
    *   `/联动同步`：管理多机器人之间的数据同步队列。

---

## 3. 论坛与反馈系统

增强 Discord 论坛频道的互动性。

*   **论坛监控**：
    *   自动监听新帖发布，支持自动回复欢迎语、自动分配身份组。
    *   `/帖子监控面板`：可视化配置每个论坛频道的监控策略。
    *   `/补发帖子消息`：漏发消息时的手动补救工具。
*   **用户反馈**：
    *   `/召唤反馈面板`：创建实名或匿名反馈入口。
    *   `/反馈设置频道`：指定接收反馈的管理频道。
    *   `/反馈白名单`：限制反馈功能的使用权限。

---

## 4. 实用工具

*   **回顶功能 (Huiding)**：
    *   发送 `/回顶` 或 `回顶`，机器人自动回复该频道/帖子的首条消息链接，方便快速跳转。
    *   `/huiding_toggle`：开关此功能。
*   **Todo List**：
    *   `/todo`：轻量级待办事项管理工具。
*   **公告系统**：
    *   `/say`：让机器人代发消息（支持回复引用和图片附件）。

---

## 5. 开发者与维护

仅供 Bot 拥有者使用的维护指令。

*   `/状态`：查看 CPU/内存/磁盘占用及数据库统计。
*   `/重载`：热更新 Cog 模块，无需重启进程。
*   `/调试`：清理缓存、查看活跃 Session。
*   `/公告`：向所有服务器广播系统消息。

---

## 6. 安装与配置

### 环境要求
*   Python 3.10+
*   MySQL / SQLite

### 部署步骤

1.  **克隆项目**
    ```bash
    git clone https://github.com/Molilili001/dc_dojo_bot_moli.git
    cd dc_dojo_bot_moli
    ```

2.  **安装依赖**
    ```bash
    pip install -r requirements.txt
    ```

3.  **配置文件**
    ```bash
    cp config.example.json config.json
    ```
    编辑 `config.json`，填入 `BOT_TOKEN`、数据库配置及管理员 ID。

4.  **启动**
    ```bash
    python bot.py
    ```

## 📄 许可证

本项目采用 [MIT License](LICENSE) 许可证。