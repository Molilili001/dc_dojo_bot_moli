# Discord Bot 功能介绍

本机器人是一个集成了**道馆挑战系统**、**社区管理工具**、**论坛监控**以及多种**实用功能**的综合性 Discord 机器人。它旨在为服务器提供丰富的互动体验、自动化的管理流程以及便捷的辅助工具。

本文档将详细介绍机器人拥有的所有功能模块，帮助您更好地了解和使用它。

---

## 📚 目录

1.  [核心玩法：道馆挑战系统](#1-核心玩法道馆挑战系统)
2.  [社区管理与安全](#2-社区管理与安全)
3.  [论坛与反馈系统](#3-论坛与反馈系统)
4.  [实用工具](#4-实用工具)
5.  [开发者工具](#5-开发者工具)
6.  [权限体系](#6-权限体系)

---

## 1. 核心玩法：道馆挑战系统

道馆挑战系统是本机器人的核心功能，模拟了类似游戏中“挑战道馆、收集徽章”的玩法。

### 🛡️ 对于挑战者 (普通用户)

作为一名挑战者，您的目标是战胜各个道馆，收集徽章，最终完成所有挑战获得毕业奖励。

*   **开始挑战**
    *   寻找服务器中管理员设置的**挑战面板**。
    *   点击面板上的按钮即可开始挑战。
    *   **普通道馆**：允许一定数量的错误，挑战成功可获得该道馆徽章。
    *   **究极道馆**：从所有道馆的题库中随机抽取题目，要求**零容错**，并记录完成时间计入排行榜。

*   **挑战流程**
    *   挑战以私密消息或临时频道形式进行。
    *   题目类型包括单选、判断、填空等。
    *   如果不幸失败，可能会有短暂的冷却时间（“禁赛”），防止恶意刷题。

*   **进度查询**
    *   `/我的进度`：查看当前已完成的道馆数量、失败记录以及究极道馆的最佳成绩。
    *   `/我的徽章墙`：生成一张精美的图片，展示您已获得的所有道馆徽章。

*   **荣誉与奖励**
    *   **排行榜**：使用 `/排行榜` 查看究极道馆的通关时间排名，争夺全服最强挑战者的称号。
    *   **毕业奖励**：当您完成所有（或指定数量）的道馆挑战后，通过**毕业面板**领取专属的毕业身份组，象征着您的荣耀与毅力。

### 🏛️ 对于馆主 (管理员)

作为管理员，您负责构建和维护整个道馆生态。

*   **道馆管理**
    *   `/道馆 建造`：上传 JSON 配置文件创建一个全新的道馆（包含题目、徽章、规则等）。
    *   `/道馆 更新`：更新现有道馆的配置。
    *   `/道馆 列表`：查看服务器内所有道馆的状态。
    *   `/道馆 停业`：临时关闭某个道馆，暂停挑战。
    *   `/道馆 删除`：永久删除一个道馆。
    *   `/道馆 后门`：导出某个道馆的 JSON 配置文件（用于备份或迁移）。

*   **面板管理**
    *   `/召唤面板`：在当前频道创建一个互动面板（普通道馆或究极道馆），供用户点击挑战。
    *   `/更新面板`：修改已存在的面板设置（如关联道馆、奖励身份组、是否启用黑名单检查等）。
    *   `/召唤徽章墙`：放置一个让用户查看自己徽章墙的按钮面板。
    *   `/毕业面板`：放置一个供完成挑战的用户领取毕业奖励的面板。
    *   `/召唤排行榜`：放置一个实时更新的究极道馆排行榜面板。
    *   `/道馆 列表面板`：查看当前服务器所有已部署的面板信息。

---

## 2. 社区管理与安全

为了维护公平公正的挑战环境，机器人配备了完善的反作弊和管理系统。

*   **黑名单系统**
    *   管理员可以使用 `/道馆黑名单` 将违规用户或身份组加入黑名单。
    *   被拉黑的用户将无法进行道馆挑战，也无法领取任何奖励。
    *   支持批量添加、移除和清空操作。

*   **封禁系统**
    *   `/道馆封禁`：针对特定用户的挑战权限进行封禁。
    *   **自动封禁**：用户连续多次挑战失败后，系统会自动对其进行临时封禁（冷却），时间随失败次数递增。
    *   `/admin_解除处罚`：管理员可以手动解除用户的挑战冷却时间。

*   **跨 Bot 联动同步**
    *   支持多机器人协同工作。
    *   当一个用户在某个机器人处受到处罚（如被拉黑），该处罚信息会自动同步到其他关联的机器人。
    *   `/联动同步`：查看同步状态、强制同步用户数据或清理同步队列。

*   **数据管理**
    *   `/admin_重置进度`：管理员可以重置指定用户的道馆挑战进度（用于处理异常或重赛）。

---

## 3. 论坛与反馈系统

机器人还提供了强大的社区互动功能，特别针对论坛频道进行了优化。

*   **论坛监控**
    *   自动监听论坛频道的新帖发布。
    *   **自动操作**：可以配置为新帖作者自动添加身份组、在帖子内发送欢迎语并 @作者、或 @特定身份组（如版主）提醒查看。
    *   `/帖子监控面板`：管理员可召唤一个配置面板，图形化地设置每个论坛频道的监控策略。
    *   `/补发帖子消息`：如果机器人因故漏掉了某个帖子的处理，管理员可以手动触发补发。

*   **用户反馈系统**
    *   `/召唤反馈面板`：创建一个反馈中心，支持**实名**和**匿名**两种反馈方式。
    *   用户点击按钮填写表单，反馈内容会自动转发到管理员设置的目标频道。
    *   `/反馈设置频道`：指定接收反馈消息的频道。
    *   `/反馈白名单`：限制只有特定身份组的用户才能提交反馈。

---

## 4. 实用工具

一些提升社区体验的小工具。

*   **回顶功能 (Huiding)**
    *   在任意频道发送 `/回顶`、`／回顶` 或 `回顶`。
    *   机器人会回复该频道的**第一条消息（首楼）**的跳转链接，方便用户快速回顾历史或查看置顶规则。
    *   管理员可通过 `/huiding_toggle` 开启或关闭此功能。

*   **Todo List (待办事项)**
    *   `/todo`：一个简单的待办事项管理工具，支持添加、完成和查看任务列表。

*   **公告发布**
    *   `/say`：让机器人以官方身份在指定频道发送消息（支持附带图片和回复特定消息）。

---

## 5. 开发者工具

仅供机器人拥有者（Owner）使用的维护工具。

*   `/状态`：查看服务器资源占用（CPU/内存/磁盘）、机器人运行时间、各数据库表的记录数统计。
*   `/下载今日日志`：一键获取机器人的运行日志文件，便于排查问题。
*   `/重载`：热重载指定的 Cog 模块，无需重启机器人即可更新代码。
*   `/调试`：包含清理缓存、查看活跃挑战会话、强制同步命令树等高级操作。
*   `/公告`：向所有已加入服务器的系统频道广播全局公告。

---

## 6. 权限体系

机器人采用三级权限体系，确保安全与灵活：

1.  **Owner (拥有者)**：拥有最高权限，可使用所有指令，包括开发者工具。
2.  **Gym Master (馆主)**：
    *   由管理员通过 `/设置馆主` 指令授权。
    *   可以使用所有道馆管理、面板管理、黑名单/封禁管理以及论坛/反馈配置指令。
    *   适合授予给社区版主或活动组织者。
3.  **Challenger (普通用户)**：
    *   可以使用挑战相关指令（开始挑战、查询进度、排行榜等）。
    *   可以使用实用工具（回顶、Todo 等）。

---

**祝您在道馆挑战中玩得开心！** 🎮🏆